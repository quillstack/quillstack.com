<!doctype html>
<html data-n-head-ssr>
  <head>
    <title>Dependency Injection - QuillStack</title><meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1"><link rel="preload" href="/_nuxt/ffc365a.js" as="script"><link rel="preload" href="/_nuxt/601aed9.js" as="script"><link rel="preload" href="/_nuxt/6fb032a.js" as="script"><link rel="preload" href="/_nuxt/5fa90f9.js" as="script"><link rel="preload" href="/_nuxt/89bbb2b.js" as="script"><link rel="preload" href="/_nuxt/f8decd6.js" as="script"><style data-vue-ssr-id="0211d3d2:0 e622d370:0 fa7ff0ca:0">/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}strong{font-weight:bolder}code{font-family:monospace,monospace;font-size:1em}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}template{display:none}h1,h2,h3,ol,p,pre,ul{margin:0}ol,ul{list-style:none;padding:0}html{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,"Noto Sans","Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";line-height:1.5}*,:after,:before{box-sizing:border-box;border:0 solid #e2e8f0}h1,h2,h3{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}code,pre{font-family:Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}object{display:block;vertical-align:middle}.container{width:100%}@media (min-width:640px){.container{max-width:640px}}@media (min-width:768px){.container{max-width:768px}}@media (min-width:1024px){.container{max-width:1024px}}@media (min-width:1280px){.container{max-width:1280px}}.border-solid{border-style:solid}.border-b{border-bottom-width:1px}.inline-block{display:inline-block}.contents{display:contents}.list-disc{list-style-type:disc}.list-decimal{list-style-type:decimal}.mx-auto{margin-left:auto;margin-right:auto}.ml-2{margin-left:.5rem}.mr-6{margin-right:1.5rem}.mt-32{margin-top:8rem}.pl-2{padding-left:.5rem}.pointer-events-none{pointer-events:none}.static{position:static}.text-center{text-align:center}.w-11\/12{width:91.666667%}.w-full{width:100%}@-webkit-keyframes spin{to{transform:rotate(1turn)}}@keyframes spin{to{transform:rotate(1turn)}}@-webkit-keyframes ping{75%,to{transform:scale(2);opacity:0}}@keyframes ping{75%,to{transform:scale(2);opacity:0}}@-webkit-keyframes pulse{50%{opacity:.5}}@keyframes pulse{50%{opacity:.5}}@-webkit-keyframes bounce{0%,to{transform:translateY(-25%);-webkit-animation-timing-function:cubic-bezier(.8,0,1,1);animation-timing-function:cubic-bezier(.8,0,1,1)}50%{transform:none;-webkit-animation-timing-function:cubic-bezier(0,0,.2,1);animation-timing-function:cubic-bezier(0,0,.2,1)}}@keyframes bounce{0%,to{transform:translateY(-25%);-webkit-animation-timing-function:cubic-bezier(.8,0,1,1);animation-timing-function:cubic-bezier(.8,0,1,1)}50%{transform:none;-webkit-animation-timing-function:cubic-bezier(0,0,.2,1);animation-timing-function:cubic-bezier(0,0,.2,1)}}@media (min-width:768px){.md\:w-1\/3{width:33.333333%}}@media (min-width:1024px){.lg\:w-1\/4{width:25%}}/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}strong{font-weight:bolder}code{font-family:monospace,monospace;font-size:1em}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}template{display:none}h1,h2,h3,ol,p,pre,ul{margin:0}ol,ul{list-style:none;padding:0}html{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,"Noto Sans","Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";line-height:1.5}*,:after,:before{box-sizing:border-box;border:0 solid #e2e8f0}h1,h2,h3{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}code,pre{font-family:Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}object{display:block;vertical-align:middle}@font-face{font-family:"Libre Baskerville";src:url(/_nuxt/fonts/LibreBaskerville-Regular.a630d0a.woff2) format("woff2"),url(/_nuxt/fonts/LibreBaskerville-Regular.d784f30.woff) format("woff");font-display:swap}@font-face{font-family:"Source Code Pro";src:url(/_nuxt/fonts/SourceCodePro-Regular.58b5030.woff2) format("woff2"),url(/_nuxt/fonts/SourceCodePro-Regular.eed8f79.woff) format("woff");font-display:swap}body{background:#e9e9eb;color:#2a2a2a}h1{font-size:2.25rem;line-height:1.375}h1,h2{margin-top:2.5rem;font-family:Georgia,Cambria,"Times New Roman",Times,serif;padding-top:.75rem;width:91.666667%;margin-left:auto;margin-right:auto;font-family:"Libre Baskerville",serif}h2{font-size:1.5rem;line-height:2rem}h3{margin-top:2rem;font-size:1.25rem;padding-top:.75rem;line-height:1.5rem;margin-left:auto;margin-right:auto}h3,ol,p,ul{font-family:Georgia,Cambria,"Times New Roman",Times,serif;width:91.666667%;font-family:"Libre Baskerville",serif}ol,p,ul{font-size:1rem;padding-bottom:.75rem;margin:1rem auto;line-height:2}p.glue-top{padding-top:0}a.link,a.link:visited{--text-opacity:1;color:#3182ce;color:rgba(49,130,206,var(--text-opacity));border-bottom-width:1px;cursor:pointer;border-color:#ccc}@media (min-width:768px){h1,h2,h3,ol.main,p,ul.main{width:75%}}@media (min-width:1024px){h1,h2,h3,ol.main,p,ul.main{width:50%}}@media (min-width:1280px){h1,h2,h3,ol.main,p,ul.main{width:33.333333%}}ol.main{padding-left:2.5rem}ol.main>li{padding-left:.75rem}.toc{padding-top:1rem;padding-bottom:1rem;background:#ddd}ul{padding-left:2.5rem;padding-top:0;margin-top:0;margin-bottom:0}div.code{padding-top:2.5rem;padding-bottom:2.5rem;margin-bottom:2rem;width:100%;overflow-x:scroll;background:#2c2c2c}div.code ul{padding:0}div.code ul li{white-space:nowrap;font-family:"Source Code Pro",monospace}div.code ul li span{font-size:.875rem}div.code ul span.variable{color:#a09be7}div.code ul span.keyword{color:#ea5271}div.code ul span.string{color:#49a078}div.code ul span.class{color:#79addc}div.code ul span.char{color:#e9e9e9}div.code ul span.method{color:#f7c548}#logo{filter:invert(14%) sepia(0) saturate(0) hue-rotate(356deg) brightness(97%) contrast(91%)}.container{width:100%}@media (min-width:640px){.container{max-width:640px}}@media (min-width:768px){.container{max-width:768px}}@media (min-width:1024px){.container{max-width:1024px}}@media (min-width:1280px){.container{max-width:1280px}}.border-solid{border-style:solid}.border-b{border-bottom-width:1px}.inline-block{display:inline-block}.contents{display:contents}.list-disc{list-style-type:disc}.list-decimal{list-style-type:decimal}.mx-auto{margin-left:auto;margin-right:auto}.ml-2{margin-left:.5rem}.mr-6{margin-right:1.5rem}.mt-32{margin-top:8rem}.pl-2{padding-left:.5rem}.pointer-events-none{pointer-events:none}.static{position:static}.text-center{text-align:center}.w-11\/12{width:91.666667%}.w-full{width:100%}@-webkit-keyframes spin{to{transform:rotate(1turn)}}@keyframes spin{to{transform:rotate(1turn)}}@-webkit-keyframes ping{75%,to{transform:scale(2);opacity:0}}@keyframes ping{75%,to{transform:scale(2);opacity:0}}@-webkit-keyframes pulse{50%{opacity:.5}}@keyframes pulse{50%{opacity:.5}}@-webkit-keyframes bounce{0%,to{transform:translateY(-25%);-webkit-animation-timing-function:cubic-bezier(.8,0,1,1);animation-timing-function:cubic-bezier(.8,0,1,1)}50%{transform:none;-webkit-animation-timing-function:cubic-bezier(0,0,.2,1);animation-timing-function:cubic-bezier(0,0,.2,1)}}@keyframes bounce{0%,to{transform:translateY(-25%);-webkit-animation-timing-function:cubic-bezier(.8,0,1,1);animation-timing-function:cubic-bezier(.8,0,1,1)}50%{transform:none;-webkit-animation-timing-function:cubic-bezier(0,0,.2,1);animation-timing-function:cubic-bezier(0,0,.2,1)}}@media (min-width:768px){.md\:w-1\/3{width:33.333333%}}@media (min-width:1024px){.lg\:w-1\/4{width:25%}}.nuxt-progress{position:fixed;top:0;left:0;right:0;height:2px;width:0;opacity:1;transition:width .1s,opacity .4s;background-color:#000;z-index:999999}</style><link rel="preload" href="/_nuxt/static/1601670741/di/payload.js" as="script">
  </head>
  <body>
    <div data-server-rendered="true" id="__nuxt"><!----><div id="__layout"><div><div class="border-b w-full border-solid" style="border-color:#2c2c2c"><div class="w-11/12 md:w-1/3 lg:w-1/4 pl-2 mx-auto"><a href="/" class="nuxt-link-active"><object type="image/svg+xml" width="100" id="logo" data="/_nuxt/img/quillstack-simple.376bc99.svg" class="mx-auto pointer-events-none">
                    Quill Stack
                </object></a></div></div> <div><h1>
        Dependency Injection Container
    </h1> <p><strong>QuillStack DI</strong> is the dependency injection container based on
        <a href="https://www.php-fig.org/psr/psr-11/" target="_blank" rel="noopener noreferrer" class="link">
            PSR-11: Container interface</a>.
        The library was built with the main goal: to be fast!
    </p> <div class="toc"><h3 class="text-center">
            Table of contents
        </h3> <ol class="list-decimal main"><li><a class="link">
                    What is a DI Container?
                </a></li> <ul class="list-disc"><li><a href="#" class="link">
                        The Repository-Service Pattern
                    </a></li> <li><a href="#" class="link">
                        MVC Pattern
                    </a></li></ul> <li><a href="#" class="link">
                    Installation
                </a></li> <li><a href="#" class="link">
                    Usage
                </a></li> <ul class="list-disc"><li><a href="#" class="link">
                        Simple usage
                    </a></li> <li><a href="#" class="link">
                        Dependencies based on interfaces
                    </a></li> <li><a href="#" class="link">
                        Dependencies with parameters
                    </a></li></ul></ol></div> <h2>
        What is the DI Container?
    </h2> <p>
        Every time you need a create a new instance of some class, you use the keyword <em>new</em>, like here:
    </p> <div class="code"><ul class="main"><li><span><pre class="inline-block ml-2 mr-6"><span class="variable">$dog</span> <span class="char">=</span> <span class="keyword">new</span> <span class="class">Dog<span class="char">(</span><span class="string">'Forest'</span><span class="char">)</span><span class="char">;</span></span></pre></span></li></ul></div> <p>
        In our example the string parameter <em>Forest</em>, which is a lovely name for a dog, is a dependency we
        need to know when we're creating a new <em>Dog</em> object.
    </p> <p>
        Of course our example is very simple. Life brings us more difficult problems to solve.
    </p> <h3 id="repository-service-pattern">
        The Repository-Service Pattern
    </h3> <p>
        One of the most popular design patterns is <em>the Repository-Service pattern</em>. More complex systems
        requires layers of abstraction, to keep the code maintainable and easy to understand, learn, and extend.
        This pattern is a good example of the usage for containers.
    </p> <p><em>The Repository-Service pattern</em> allows you to separate two layers from the rest of you application.
    </p> <p class="glue-top"><strong>Services</strong> provide some business logic and can be used e.g. in Controllers or other Services.
    </p> <p class="glue-top"><strong>Repositories</strong> are the data access layer and can connect e.g. to the database, and should
        be used only in Services.
    </p> <p>
        In that way we can end up with a lot of dependencies, usually injected via constructors:
    </p> <div class="code"><ul class="main"><li><span><pre class="inline-block ml-2 mr-6"><span class="variable">$media</span> <span class="char">=</span> <span class="keyword">new</span> <span class="class">MediaService<span class="char">(</span></span></pre></span></li><li><span><pre class="inline-block ml-2 mr-6">    <span class="keyword">new</span> <span class="class">Logger<span class="char">(</span><span class="char">)</span><span class="char">,</span></span> <span class="keyword">new</span> <span class="class">MediaRepository<span class="char">(</span></span></pre></span></li><li><span><pre class="inline-block ml-2 mr-6">        <span class="keyword">new</span> <span class="class">Database<span class="char">(</span><span class="char">)</span><span class="char">,</span></span> <span class="keyword">new</span> <span class="class">Logger<span class="char">(</span><span class="char">)</span></span></pre></span></li><li><span><pre class="inline-block ml-2 mr-6">    <span class="char">)</span></pre></span></li><li><span><pre class="inline-block ml-2 mr-6"><span class="char">)</span><span class="char">;</span></pre></span></li></ul></div> <p>
        Do we want to remember all these classes when we need to have an instance of the Media Service? No!
    </p> <p>
        This is a moment when a container helps us to sort it out and change it to this:
    </p> <div class="code"><ul class="main"><li><span><pre class="inline-block ml-2 mr-6"><span class="variable">$media</span> <span class="char">=</span> <span class="variable">$container<span class="method"><span class="char">-</span><span class="char">></span>get<span class="char">(</span></span><span class="class">MediaService<span class="char">:</span><span class="char">:</span></span><span class="keyword">class</span><span class="char">)</span><span class="char">;</span></span></pre></span></li></ul></div> <p>
        So much better! And there's no magic. The dependency injection container checks every parameter of the given
        class and create a new instance of required objects. If these classes are dependent on other objects,
        the DI Container also creates them.
    </p> <p>
        The implementation of this kind of library is very often based on recursion.
    </p> <h3 id="mvc-pattern">
        MVC Pattern
    </h3> <p>
        Containers are often used in MVC frameworks. The first initialized class is a <em>Controller</em>, where
        we can inject some dependencies, usually services:
    </p> <div class="code"><ul class="main"><li><span><pre class="inline-block ml-2 mr-6"><span class="keyword">new</span> <span class="class">MediaController<span class="char">(</span></span></pre></span></li><li><span><pre class="inline-block ml-2 mr-6">    <span class="keyword">new</span> <span class="class">MediaService<span class="char">(</span></span></pre></span></li><li><span><pre class="inline-block ml-2 mr-6">        <span class="keyword">new</span> <span class="class">Logger<span class="char">(</span><span class="char">)</span><span class="char">,</span></span> <span class="keyword">new</span> <span class="class">MediaRepository<span class="char">(</span></span></pre></span></li><li><span><pre class="inline-block ml-2 mr-6">            <span class="keyword">new</span> <span class="class">Database<span class="char">(</span><span class="char">)</span><span class="char">,</span></span> <span class="keyword">new</span> <span class="class">Logger<span class="char">(</span><span class="char">)</span></span></pre></span></li><li><span><pre class="inline-block ml-2 mr-6">        <span class="char">)</span></pre></span></li><li><span><pre class="inline-block ml-2 mr-6">    <span class="char">)</span></pre></span></li><li><span><pre class="inline-block ml-2 mr-6"><span class="char">)</span><span class="char">;</span></pre></span></li></ul></div> <p>
        Without a DI Container our life is hard. We can easily fix it:
    </p> <div class="code"><ul class="main"><li><span><pre class="inline-block ml-2 mr-6"><span class="variable">$media</span> <span class="char">=</span> <span class="variable">$container<span class="method"><span class="char">-</span><span class="char">></span>get<span class="char">(</span></span><span class="class">MediaController<span class="char">:</span><span class="char">:</span></span><span class="keyword">class</span><span class="char">)</span><span class="char">;</span></span></pre></span></li></ul></div> <p>
        All of this work is done by framework for us, so we don't have to worry about it.
    </p> <h2 id="installation">
        Installation
    </h2> <p>
        To install this package, run the standard command using
        <a target="_blank" href="https://getcomposer.org/" rel="noopener noreferrer" class="link">Composer</a>:
    </p> <div class="code"><ul class="main"><li><span class="char">
                    composer require quillstack/di
                </span></li></ul></div> <p>
        The package will be ready to use after that.
    </p> <h2 id="usage">
        Usage
    </h2> <p>
        You can use QuillStack DI when you want:
    </p> <ul class="list-disc main"><li>To have a simple and fast DI container.</li> <li>Define dependencies based on interfaces.</li> <li>Define parameters e.g. credentials for a database in <em>Database</em> class.</li></ul> <h3 id="simple-usage">
        Simple usage
    </h3> <p>
        You can easily start using a DI Container:
    </p> <div class="code"><ul class="main"><li><span><pre class="inline-block ml-2 mr-6"><span class="keyword">&lt;?php</span></pre></span></li><li><span><pre class="inline-block ml-2 mr-6">    </pre></span></li><li><span><pre class="inline-block ml-2 mr-6"><span class="keyword">use</span> <span class="class">QuillStack\DI\Container</span><span class="char">;</span></pre></span></li><li><span><pre class="inline-block ml-2 mr-6">    </pre></span></li><li><span><pre class="inline-block ml-2 mr-6"><span class="keyword">require</span> <span class="variable">__DIR__</span> <span class="char">.</span> <span class="string">'/../vendor/autoload.php'</span><span class="char">;</span></pre></span></li><li><span><pre class="inline-block ml-2 mr-6">    </pre></span></li><li><span><pre class="inline-block ml-2 mr-6"><span class="variable">$container</span> <span class="char">=</span> <span class="keyword">new</span> <span class="class">Container<span class="char">(</span><span class="char">)</span><span class="char">;</span></span></pre></span></li><li><span><pre class="inline-block ml-2 mr-6"><span class="variable">$controller</span> <span class="char">=</span> <span class="variable">$container<span class="method"><span class="char">-</span><span class="char">></span>get<span class="char">(</span></span><span class="class">ExampleController<span class="char">:</span><span class="char">:</span></span><span class="keyword">class</span><span class="char">)</span><span class="char">;</span></span></pre></span></li></ul></div> <p>
        This code creates an instance of the container class. The container creates every class with <em>get</em>
        method, in our case it will be <em>ExampleController</em>.
    </p> <h3 id="dependencies-based-on-interfaces">
        Dependencies based on interfaces
    </h3> <p>
        If you want to define which class should be loaded based on an interface, you can easily do that:
    </p> <div class="code"><ul class="main"><li><span><pre class="inline-block ml-2 mr-6"><span class="variable">$container</span> <span class="char">=</span> <span class="keyword">new</span> <span class="class">Container<span class="char">(</span><span class="char">[</span></span></pre></span></li><li><span><pre class="inline-block ml-2 mr-6">    <span class="class">LoggerInterface<span class="char">:</span><span class="char">:</span></span><span class="keyword">class</span> <span class="char">=</span><span class="char">></span> <span class="class">Logger<span class="char">:</span><span class="char">:</span></span><span class="keyword">class</span><span class="char">,</span></pre></span></li><li><span><pre class="inline-block ml-2 mr-6"><span class="char">]</span><span class="char">)</span><span class="char">;</span></pre></span></li></ul></div> <p>
        When you create a new container, you can define a configuration of interfaces and class which should be
        use when these interfaces are called.
    </p> <p>
        In this example everytime when <em>LoggerInterface</em> will be used
        as a dependency, an object of <em>Logger</em> class will be injected.
    </p> <p>
        It's very useful when you want to use an implementation of some interface, but you want to keep your code
        open to changes of this implementation in the future. If you decide to do that, you'll have to change
        just one line.
    </p> <h3 id="dependencies-with-parameters">
        Dependencies with parameters
    </h3> <p>
        If some of your classes require parameters, define them as an array passed on the second parameter to
        the container:
    </p> <div class="code"><ul class="main"><li><span><pre class="inline-block ml-2 mr-6"><span class="variable">$container</span> <span class="char">=</span> <span class="keyword">new</span> <span class="class">Container<span class="char">(</span><span class="char">[</span></span></pre></span></li><li><span><pre class="inline-block ml-2 mr-6">    <span class="class">Database<span class="char">:</span><span class="char">:</span></span><span class="keyword">class</span> <span class="char">=</span><span class="char">></span> <span class="char">[</span></pre></span></li><li><span><pre class="inline-block ml-2 mr-6">        <span class="string">'hostname'</span> <span class="char">=</span><span class="char">></span> <span class="string">'localhost'</span><span class="char">,</span></pre></span></li><li><span><pre class="inline-block ml-2 mr-6">    <span class="char">]</span><span class="char">,</span></pre></span></li><li><span><pre class="inline-block ml-2 mr-6"><span class="char">]</span><span class="char">)</span><span class="char">;</span></pre></span></li></ul></div> <p>
        Of course you can take the value of the hostname from the configuration files.
    </p></div> <footer class="mt-32"><p>
            © 2020
            <a href="/" class="link nuxt-link-active">
                The Quill Stack
            </a></p></footer></div></div></div><script>window.__NUXT__={staticAssetsBase:"/_nuxt/static/1601670741",layout:"default",error:null,serverRendered:!0,routePath:"/di",config:{}}</script><script src="/_nuxt/ffc365a.js" defer></script><script src="/_nuxt/89bbb2b.js" defer></script><script src="/_nuxt/f8decd6.js" defer></script><script src="/_nuxt/601aed9.js" defer></script><script src="/_nuxt/6fb032a.js" defer></script><script src="/_nuxt/5fa90f9.js" defer></script>
  </body>
</html>
